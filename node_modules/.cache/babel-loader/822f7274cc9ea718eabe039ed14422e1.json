{"ast":null,"code":"import _slicedToArray from\"/Users/siriuskl/Documents/Front-End/search/WebFinal-2019/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/siriuskl/Documents/Front-End/search/WebFinal-2019/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from'react';import{useParams}from'react-router';import TopBar from'../Components/MainPage/TopBar';import Container from'@material-ui/core/Container';import{makeStyles}from'@material-ui/core/styles';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import InputLabel from'@material-ui/core/InputLabel';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import Axios from'axios';var axios=Axios.create();var useStyle=makeStyles(function(theme){var _content;return{footer:{height:'8vh',width:'100vw',textAlign:'center',alignItems:'center',backgroundColor:'#fa877f',color:'#FFFFFF',fontSize:'2vh',display:'fixed',bottom:'0px'},solid:{display:'block',width:'100%',height:'64px',backgroundColor:'#FFFFFF'},container:{height:'90vh',overflow:'scroll',flexDirection:'column',maxWidth:'700px'},textfield:_defineProperty({display:'flex',flexDirection:'column',width:'100%',height:'50vh',border:'solid #cccccc 2px',borderRadius:'5px'},theme.breakpoints.down('md'),{height:'40vh'}),text:{display:'flex',width:'100%',height:'20%'},form:{display:'flex',minWidth:120,marginLeft:'5%',marginTop:'2%',flexDirection:'column'},buttons:{display:'flex',minWidth:120,marginTop:'1%',flexDirection:'column'},content:(_content={width:'38vw'},_defineProperty(_content,theme.breakpoints.down('md'),{width:'50vw'}),_defineProperty(_content,theme.breakpoints.down('sm'),{width:'75vw'}),_content),submit:{marginLeft:'10px'}};});var ReviewPage=function ReviewPage(props){var _useParams=useParams(),businessId=_useParams.businessId,userId=_useParams.userId;useEffect(function(){if(userId&&userId!=='undefined'){setLog(true);}},[]);var classes=useStyle();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),logged=_useState2[0],setLog=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),star=_useState4[0],setStar=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submit=_useState8[0],setSubmit=_useState8[1];var onChangeHandler=function onChangeHandler(e){setStar(e.target.value);};var textChangeHandler=function textChangeHandler(e){setContent(e.target.value);};var onSubmitHandler=function onSubmitHandler(e){console.log(star);console.log(content);axios.post(\"https://midi-fiction.glitch.me/api/newReview\",{user_id:userId,business_id:businessId,stars:parseInt(star),text:content}).then(function(res){localStorage.setItem(\"business\",JSON.stringify(res.data));// console.log(JSON.parse(localStorage.getItem(\"business\")));\nwindow.location.href=\"#/detail/\".concat(businessId,\"/\").concat(userId);}).catch(function(err){return console.log(err);});setSubmit(true);};return React.createElement(\"div\",null,React.createElement(TopBar,{logged:logged,businessId:businessId,userId:userId}),React.createElement(\"div\",{className:classes.solid}),React.createElement(Container,{className:classes.container},React.createElement(\"h1\",null,\"Write a review\"),React.createElement(\"div\",{className:classes.textfield},React.createElement(\"div\",{className:classes.text},React.createElement(FormControl,{className:classes.form},React.createElement(TextField,{label:\"Write a review\",multiline:true,rowsMax:\"10\",value:content,onChange:textChangeHandler,className:classes.content,margin:\"normal\"})))),React.createElement(\"div\",{style:{display:'flex',flexDirection:'row',height:'10%',width:'100%',alignItems:'flex-end'}},React.createElement(FormControl,{className:classes.buttons},React.createElement(InputLabel,null,\"Stars\"),React.createElement(Select,{value:star,onChange:onChangeHandler},React.createElement(MenuItem,{value:0},\"0\"),React.createElement(MenuItem,{value:1},\"1\"),React.createElement(MenuItem,{value:2},\"2\"),React.createElement(MenuItem,{value:3},\"3\"),React.createElement(MenuItem,{value:4},\"4\"),React.createElement(MenuItem,{value:5},\"5\"))),React.createElement(Button,{variant:\"contained\",color:\"secondary\",className:classes.submit,onClick:onSubmitHandler},\"Submit\"))),React.createElement(\"div\",{className:classes.footer},React.createElement(\"p\",null,\"Copyright \\xA9 2019-03-12 Yummy Inc.\")));};export default ReviewPage;","map":{"version":3,"sources":["/Users/siriuskl/Documents/Front-End/search/WebFinal-2019/src/Pages/ReviewPage.js"],"names":["React","useState","useEffect","useParams","TopBar","Container","makeStyles","FormControl","Select","MenuItem","InputLabel","TextField","Button","Axios","axios","create","useStyle","theme","footer","height","width","textAlign","alignItems","backgroundColor","color","fontSize","display","bottom","solid","container","overflow","flexDirection","maxWidth","textfield","border","borderRadius","breakpoints","down","text","form","minWidth","marginLeft","marginTop","buttons","content","submit","ReviewPage","props","businessId","userId","setLog","classes","logged","star","setStar","setContent","setSubmit","onChangeHandler","e","target","value","textChangeHandler","onSubmitHandler","console","log","post","user_id","business_id","stars","parseInt","then","res","localStorage","setItem","JSON","stringify","data","window","location","href","catch","err"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react';\nimport {useParams} from 'react-router';\nimport TopBar from '../Components/MainPage/TopBar';\nimport Container from '@material-ui/core/Container';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Axios from 'axios';\n\nconst axios = Axios.create()\n\nconst useStyle = makeStyles(theme =>({\n    footer: {\n        height: '8vh',\n        width: '100vw',\n        textAlign: 'center',\n        alignItems: 'center',\n        backgroundColor: '#fa877f',\n        color: '#FFFFFF',\n        fontSize: '2vh',\n        display :'fixed',\n        bottom: '0px'\n    },\n    solid: {\n        display: 'block',\n        width: '100%',\n        height: '64px',\n        backgroundColor: '#FFFFFF'\n    },\n    container:{\n        height: '90vh',\n        overflow: 'scroll',\n        flexDirection:'column',\n        maxWidth: '700px',\n    },\n    textfield:{\n        display: 'flex',\n        flexDirection:'column',\n        width: '100%',\n        height: '50vh',\n        border: 'solid #cccccc 2px',\n        borderRadius: '5px',\n        [theme.breakpoints.down('md')]:{\n            height:'40vh'\n        }\n    },\n    text:{\n        display:'flex',\n        width: '100%',\n        height: '20%'\n    },\n    form: {\n        display: 'flex',\n        minWidth: 120,\n        marginLeft: '5%',\n        marginTop: '2%',\n        flexDirection: 'column'\n    },\n    buttons:{\n        display: 'flex',\n        minWidth: 120,\n        marginTop: '1%',\n        flexDirection: 'column'\n    },\n    content: {\n        width: '38vw',\n        [theme.breakpoints.down('md')]:{\n            width: '50vw'\n        },\n        [theme.breakpoints.down('sm')]:{\n            width: '75vw'\n        }\n    },\n    submit:{\n        marginLeft: '10px'\n    }\n}))\n\nconst ReviewPage = (props) => {\n    let {businessId, userId} = useParams();\n    useEffect(() => {\n        if (userId && userId !== 'undefined'){\n            setLog(true)\n        }\n    },[]);\n    const classes = useStyle();\n    const [logged, setLog] = useState(true);\n    const [star, setStar] = useState(5);\n    const [content, setContent] = useState('');\n    const [submit, setSubmit] = useState(false)\n\n    const onChangeHandler = (e) => {\n        setStar(e.target.value);\n    }\n\n    const textChangeHandler = (e) => {\n        setContent(e.target.value);\n    }\n\n    const onSubmitHandler = (e) => {\n        console.log(star);\n        console.log(content);\n        axios.post(\"https://midi-fiction.glitch.me/api/newReview\",{\n            user_id: userId,\n            business_id: businessId,\n            stars: parseInt(star),\n            text: content\n        }).then(res=>{\n            localStorage.setItem(\"business\", JSON.stringify(res.data));\n            // console.log(JSON.parse(localStorage.getItem(\"business\")));\n            window.location.href=`#/detail/${businessId}/${userId}`\n        }\n        ).catch(err=>console.log(err))\n        setSubmit(true);\n    }\n\n    return (\n        <div>\n            <TopBar logged={logged} businessId={businessId} userId={userId}/>\n            <div className={classes.solid}></div>\n            <Container className={classes.container}>\n                <h1>Write a review</h1>\n                <div className={classes.textfield}>\n                    <div className={classes.text}>\n                        <FormControl className={classes.form}>\n                                <TextField\n                                    label=\"Write a review\"\n                                    multiline\n                                    rowsMax=\"10\"\n                                    value={content}\n                                    onChange={textChangeHandler}\n                                    className={classes.content}\n                                    margin=\"normal\"\n                                />\n                        </FormControl>\n                    </div> \n                </div>\n                <div style={{display: 'flex', flexDirection:'row', height: '10%', width: '100%', alignItems:'flex-end'}}>\n                    <FormControl className={classes.buttons}>\n                        <InputLabel>Stars</InputLabel>\n                        <Select value={star} onChange={onChangeHandler}>\n                            <MenuItem value={0}>0</MenuItem>\n                            <MenuItem value={1}>1</MenuItem>\n                            <MenuItem value={2}>2</MenuItem>\n                            <MenuItem value={3}>3</MenuItem>\n                            <MenuItem value={4}>4</MenuItem>\n                            <MenuItem value={5}>5</MenuItem>\n                        </Select>\n                    </FormControl>\n                    <Button variant='contained' color='secondary' className={classes.submit} onClick={onSubmitHandler}>Submit</Button>\n                </div>\n            </Container>\n            <div className={classes.footer}>\n                <p>Copyright © 2019-03-12 Yummy Inc.</p>\n            </div>\n        </div>\n    )\n}\n\nexport default ReviewPage;"]},"metadata":{},"sourceType":"module"}